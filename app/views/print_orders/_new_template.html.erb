<div class="content">

  <p>File : <%= prints.file.filename if prints.file.attached? %>
    <%= link_to "-  <b>**Action Required**</b>".html_safe, "", "data-toggle": "modal", "data-target": "#modal-approve-#{prints.id}" if prints.approved and prints.user_approval == nil %></p>

  <div class="square square-id">ID #<%= prints.id %></div>

  <%= image_tag("print_orders/arrow-1-green.svg", class: "arrow first-status") %>

  <% files.each do |file| %>
    <% if file.to_i != 0 %>
      <% file.times do %>
        <%= image_tag("print_orders/arrow-white.svg", class: "arrow unactive-status") %>
      <% end %>
    <% elsif file == "delete" %>
      <%= link_to 'Delete', print_order_path(prints), method: :delete, data: {confirm: 'Are you sure?'}, class: "square square-delete" %>
    <% elsif file == "white" %>
      <span class="square square-white">Can't Delete</span>
    <% else %>
      <% if file == "arrow-3-orange.svg" %>
        <%= image_tag("print_orders/arrow-3-orange.svg", class: "arrow active-status", "data-toggle": "modal", "data-target": "#modal-approve-#{prints.id}") %>
        <%= image_tag("print_orders/#{file.gsub(/\d+/) { |n| n.to_i + 1 }}", class: "arrow unactive-status next") %>
        <div class="modal fade" id="modal-approve-<%= prints.id %>" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Print Quote for
                  : <%= prints.file.filename if prints.file.attached? %></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <b>Quoted price : <%= prints.quote %>$</b>
                <%= form_for prints, url: print_order_path(prints) do |f| %>
                  <%= f.hidden_field :user_approval, :value => true %>
                  <%= f.hidden_field :timestamp_approved, :value => DateTime.now %>
                  <%= f.submit "I accept the quote", class: 'btn btn-primary', data: {confirm: 'Are you sure?'} %>
                <% end %>
                <br>
                <%= form_for prints, url: print_order_path(prints) do |f| %>
                  <%= f.hidden_field :user_approval, :value => false %>
                  <%= f.submit "I don't accept it", class: 'btn btn-danger', data: {confirm: 'Are you sure?'} %>
                <% end %>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>
      <% else %>
        <%= image_tag("print_orders/#{file}", class: "arrow #{file.to_s.include?("red") || file.to_s.include?("orange") || file.to_s.include?("5-green") ? "active-status" : "unactive-status"}") %>
        <% if file.to_s.include?("orange") %>
          <%= image_tag("print_orders/#{file.gsub(/\d+/) { |n| n.to_i + 1 }}", class: "arrow unactive-status next") %>
      <% end %>
      <% end %>
    <% end %>
  <% end %>

</div>