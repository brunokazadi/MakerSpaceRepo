<% provide :title, 'Request a locker' %>
<% if current_user.admin? %>
    <details>
        <summary class="text-center fs-underline text-primary">Seen by administration only</summary>
        <h1 class="text-center my-3">Assign locker to user</h1>
        <%= render partial: 'assign_locker_form' %>
        <hr />
    </details>
<% end %>

<div class="border container">
    <h1 class="text-center mt-3">New Locker Request</h1>
    <hr class="w-50 mx-auto" />
    <p>Here you can submit a request for a locker. Once sent, you'll be notified once your request is approved and payment is received.
        You may cancel your request before it is paid, however once paid the locker rental fee is non-refundable.</p>
    <p>You may be approved for a locker free of charge if you are:</p>
    <ol>
        <li>a GNG1103, GNG2101, or GNG5140 student, or</li>
        <li>a staff member.</li>
    </ol>
    <p>The current rates are:</p>
    <ul>
        <% LockerType.available.each do |type| %>
            <li><%= type.short_form %> - $<%= type.cost %> per semester</li>
            <p><%= type.description %></p>
        <% end %>
    </ul>
    <p>For any questions, contact us at <a href="mailto:ceed@uottawa.ca">ceed@uottawa.ca</a></p>
    <p>You may have only one pending request at a time.</p>
    <%= form_with model: @locker_rental do |f| %>
        <div class="row row-cols-auto align-items-center mb-3">
            <%= f.label :locker_type, 'Request locker for', class: 'd-inline' %>
            <%= f.select :locker_type, options_for_select(LockerType.available.pluck(:short_form, :id)), {}, { class: 'form-select w-auto d-inline' } %>
        </div>
        <!-- This hidden field is for testing/debug purposes only, we're still checking credentials you skiddie -->
        <%= f.hidden_field :ask %>
        <%= f.submit 'Submit request', class: 'btn btn-primary mb-3' %>
    <% end %>
</div>
