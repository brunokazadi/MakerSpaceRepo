<section class="page-contents">

  <div class="padding-10">

    <br>

    <div class="max_capacity_alert">
      <%= render :partial => 'max_capacity_warning', space: @space %>
    </div>

    <h2 class="text-center pt-2 mb-5">
      Welcome to <strong><%= select_tag :space_id, options_from_collection_for_select(Space.order(:name), :id, :name, @space.id), id: "set_space_id", :class => "form-select", :onchange => 'setSpace()', :style => "padding: 2px;" %></strong>
    </h2>

    <div style="float:right;">
      <%= link_to 'Download Excel Template', asset_path('excel/ImportUsersTemplate.xlsx'), download: 'ImportUsersTemplate.xlsx', class: "btn btn-secondary" %>
      <%= link_to "Download Summary",
                  staff_dashboard_present_users_report_path(format: "xlsx"),
                  action: :training_report,
                  class: "btn btn-secondary" %>
    </div>
    <br/> <br/>
    <%= render 'search' %>
    <br>

    <% if @space.makerspace? %>
      <div class="container" id="printer-div">
        <div id="printer-div-2"><%= link_to "Manage 3D-printers", staff_printers_printers_path, class: 'btn btn-secondary' %></div>
      </div>
    <% end %>
    <br />
    <div class="table-responsive" id="table-js-signed-in">
        <%=render partial:"signed_in_table", locals: {space: @space, all_user_certs: @all_user_certs, certifications_on_space: @certifications_on_space} %>
      </table>
    </div>
    <div class="table-responsive">
      <p class="text-center">Users recently signed out of <%= @space.name %></p>
      <table class="staff-recent-users-table text-center mb-5 table table-striped" id="table-js-signed-out">
        <%= render partial:"newly_signed_up", locals: {space: @space, all_user_certs: @all_user_certs, certifications_on_space: @certifications_on_space} %>
      </table>
    </div>

    <br>
    <div class="table-responsive">
      <p class="text-center">Newly signed up users on Maker<strong>Repo</strong></p>
      <table class="text-center table table-striped staff-newly-signed-up-users-table mb-5" id="newly-signed-up">
        <%= render partial:"signed_out_table", locals: {space: @space, all_user_certs: @all_user_certs, certifications_on_space: @certifications_on_space} %>
      </table>
    </div>
    
    <br />
  </div>
</section>
<%= javascript_pack_tag 'staff_dashboard', 'data-turbolinks-track': 'reload' %>