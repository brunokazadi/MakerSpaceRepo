<section class="page-contents">
  <div class="edit-column">
    <div class="title">Admin Trainings Manager</div>

    <p class="text-center"><%= link_to "New Training", new_admin_training_path, class: "btn btn-secondary" %></p>
    <br />

    <% @trainings.find_each do |t| %>
      <h2 class="text-center">Training: <%= t.name %></h2>
      <p class="text-right"><%= link_to "Edit", edit_admin_training_path(t.id), class:"btn btn-primary" %></p>
      <br />
      <table class="table">
        <tr class="text-center">
          <th>Space</th>
          <th>Training Sessions</th>
          <th>Certifications</th>
        </tr>

        <% t.spaces.find_each do |s| %>
          <tr>
            <td><%= s.name %></td>
            <td><%= t.training_sessions.where(space_id: s.id).count %></td>
            <td><%= t.certifications.joins(:training_session).where("training_sessions.space_id = ?", s.id).count %></td>
          </tr>
        <% end %>
      </table>
    <% end %>
  </div>
</section>