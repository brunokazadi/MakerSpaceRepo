<script>
    $(document).ready(function () {
        $('[data-toggle="tooltip"]').tooltip();
    });
</script>
<br>
<div class="by-5">
  <%= form_tag(badges_path, method: :get) do %>
    <div class="form-inline">
      <%= fa_icon 'search', class: "fa-2x pr-2" %>
      <%= text_field_tag(:search, "", placeholder: "Search by Badge Name, User, Description ...", class: 'form-control col-md-4 search_bar') %>
    </div>
  <% end %>
</div>

<div class="badge_list">
  <%= render 'badges/badge_list' %>
</div>

<% if @user.orders.present? %>
  <h2 style="text-align: center">My Pending Badges</h2>
  <p class="text-center">Before receiving this badge, you need to complete the project related to the badge and show it to Development Program Admin. For any questions, please contact your Proficient Project Administrator.</p>
  <div class="row">
    <% @user.orders.each do |order| %>
      <% order.order_items.each do |item| %>
        <% if ProficientProject.find(item.proficient_project_id).badge_template_id.present? and order.order_status == OrderStatus.find_by(name: "Completed") and item.status == "In progress" %>
          <div class="col-md-3" style="opacity: 0.3;">
            <%= image_tag(Badge.get_badge_image(ProficientProject.find(item.proficient_project_id).acclaim_badge_id), :style => "width: inherit") %>
          </div>
        <% end %>
      <% end %>
    <% end %>
  </div>
<% end %>

<script type="text/javascript" charset="utf-8">

    $('.search_bar').on('keyup', debounce(function (e) {
        $.ajax({
            url: '/badges',
            data: {search: $(this).serialize()},
            format: 'js'
        });
    }, 100)); //



    $(function() {
        $(".badge_list th a, .badge_list .pagination a").on("click", function(){
            $.getScript(this.href);
            return false;
        });
    });
</script>